<div class="w-screen h-screen flex flex-col justify-center items-center bg-gray-200 dark:bg-gray-800">
  <div class="text-5xl text-gray-600 dark:text-gray-200">关灯游戏</div>
  <div class="text-xl flex flex-col justify-center items-center mt-5 rounded-md ">
    <div class="text-gray-800 dark:text-gray-200 bg-green-200 dark:bg-green-800 p-5 rounded-md">
      <div>1️⃣ 点击格子，开启/关闭💡</div>
      <div>2️⃣ 点击格子时，相邻格子的灯也会一起切换</div>
      <div>3️⃣ 目标是用最少的步数关闭棋盘上所有的💡</div>
    </div>
  </div>
  <div
    class="w-1/2 h-1/2 min-w-[500px] min-h-[500px] mt-5 flex flex-col justify-center items-center border-2 border-solid border-gray-400 rounded-lg">
    @for (cs of board(); track $index;let row=$index) {
    <div class="w-full flex justify-center items-center">
      @for (c of cs; track $index;let col=$index) {
      <div
        class="w-28 h-28 m-1 cursor-pointer border-2 border-solid border-white shadow-lg transition-all duration-500 ease-in-out transform hover:scale-105 hover:shadow-2xl select-none"
        [ngClass]="{'bg-gray-600 dark:bg-gray-500': c==0, 'bg-yellow-400 dark:bg-orange-400': c==1}"
        (click)="toggleLight(row, col)">
        <span *ngIf="c==1" class="text-5xl flex justify-center items-center w-full h-full">💡</span>
      </div>
      }
    </div>
    }
    <div class="flex justify-center items-center text-xl mt-5 text-gray-800 dark:text-gray-200">已操作步数： {{steps}}</div>
    <div class="flex justify-center items-center text-xl my-5 text-gray-800 dark:text-gray-200">当前还需要关闭的💡： {{count()}}
    </div>
  </div>

</div>

<div *ngIf="showModal"
  class="w-full h-full flex justify-center items-center absolute top-0 left-0 bg-gray-800 dark:bg-gray-200 bg-opacity-80">
  <div class="w-[660px] h-[660px] flex flex-col justify-center items-center bg-gray-800 rounded-2xl">
    <div class="text-5xl text-gray-200 my-5">🎉🎉🎉恭喜🎉🎉🎉</div>
    <div class="text-3xl text-gray-200 my-5">经过{{steps}}步努力，您已关闭所有灯</div>
    <button (click)="restart()"
      class="text-3xl my-5 text-gray-200 border border-solid border-gray-200 p-5 rounded-md hover:bg-gray-600"
      type="button">重新开始</button>
  </div>
</div>
